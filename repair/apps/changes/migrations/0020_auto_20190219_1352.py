# Generated by Django 2.0 on 2019-02-19 12:52

import django.contrib.gis.db.models.fields
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import enumfields.fields
import re
import repair.apps.login.models.bases
import repair.apps.statusquo.models.indicators
import repair.apps.utils.protect_cascade


class Migration(migrations.Migration):

    dependencies = [
        ('asmfa', '0040_auto_20190214_1253'),
        ('changes', '0019_solutioninstrategy_priority'),
    ]

    operations = [
        migrations.CreateModel(
            name='ActorInSolutionPart',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('actor', models.ForeignKey(on_delete=repair.apps.utils.protect_cascade.PROTECT_CASCADE, to='asmfa.Actor')),
                ('implementation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='changes.SolutionInStrategy')),
            ],
            options={
                'abstract': False,
                'default_permissions': ('add', 'change', 'delete', 'view'),
            },
            bases=(repair.apps.login.models.bases.GDSEModelMixin, models.Model),
        ),
        migrations.CreateModel(
            name='AffectedFlow',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('destination_activity', models.ForeignKey(on_delete=repair.apps.utils.protect_cascade.PROTECT_CASCADE, related_name='affected_destination', to='asmfa.Activity')),
                ('material', models.ForeignKey(on_delete=repair.apps.utils.protect_cascade.PROTECT_CASCADE, related_name='affected_material', to='asmfa.Material')),
                ('origin_activity', models.ForeignKey(on_delete=repair.apps.utils.protect_cascade.PROTECT_CASCADE, related_name='affected_origin', to='asmfa.Activity')),
                ('process', models.ForeignKey(on_delete=repair.apps.utils.protect_cascade.PROTECT_CASCADE, related_name='affected_process', to='asmfa.Process')),
            ],
            options={
                'abstract': False,
                'default_permissions': ('add', 'change', 'delete', 'view'),
            },
            bases=(repair.apps.login.models.bases.GDSEModelMixin, models.Model),
        ),
        migrations.CreateModel(
            name='ImplementationQuantity',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('value', models.FloatField()),
                ('implementation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='changes.SolutionInStrategy')),
            ],
            options={
                'abstract': False,
                'default_permissions': ('add', 'change', 'delete', 'view'),
            },
            bases=(repair.apps.login.models.bases.GDSEModelMixin, models.Model),
        ),
        migrations.CreateModel(
            name='ImplementationQuestion',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('question', models.TextField(default='')),
                ('unit', models.CharField(blank=True, default='', max_length=100)),
                ('select_values', models.TextField(validators=[django.core.validators.RegexValidator(re.compile('^([-+]?\\d*\\.?\\d+[,\\s]*)+$'), 'Enter only floats separated by commas.', 'invalid')])),
                ('step', models.FloatField(null=True)),
                ('min_value', models.FloatField(default=0)),
                ('max_value', models.FloatField(default=1)),
                ('is_absolute', models.BooleanField(default=False)),
            ],
            options={
                'abstract': False,
                'default_permissions': ('add', 'change', 'delete', 'view'),
            },
            bases=(repair.apps.login.models.bases.GDSEModelMixin, models.Model),
        ),
        migrations.CreateModel(
            name='SolutionPart',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('documentation', models.TextField(default='')),
                ('implements_new_flow', models.BooleanField(default=False)),
                ('implementation_flow_spatial_application', enumfields.fields.EnumIntegerField(default=1, enum=repair.apps.statusquo.models.indicators.SpatialChoice)),
                ('a', models.FloatField()),
                ('b', models.FloatField()),
                ('keep_origin', models.BooleanField(default=True)),
                ('map_request', models.TextField(default='')),
                ('implementation_flow_destination_activity', models.ForeignKey(on_delete=repair.apps.utils.protect_cascade.PROTECT_CASCADE, related_name='implementation_destination', to='asmfa.Activity')),
                ('implementation_flow_material', models.ForeignKey(on_delete=repair.apps.utils.protect_cascade.PROTECT_CASCADE, related_name='implementation_material', to='asmfa.Material')),
                ('implementation_flow_origin_activity', models.ForeignKey(on_delete=repair.apps.utils.protect_cascade.PROTECT_CASCADE, related_name='implementation_origin', to='asmfa.Activity')),
                ('implementation_flow_process', models.ForeignKey(on_delete=repair.apps.utils.protect_cascade.PROTECT_CASCADE, related_name='implementation_process', to='asmfa.Process')),
                ('new_target_activity', models.ForeignKey(null=True, on_delete=repair.apps.utils.protect_cascade.PROTECT_CASCADE, related_name='new_target', to='asmfa.Activity')),
                ('question', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='changes.ImplementationQuestion')),
            ],
            options={
                'abstract': False,
                'default_permissions': ('add', 'change', 'delete', 'view'),
            },
            bases=(repair.apps.login.models.bases.GDSEModelMixin, models.Model),
        ),
        migrations.RemoveField(
            model_name='solutioninstrategyquantity',
            name='quantity',
        ),
        migrations.RemoveField(
            model_name='solutioninstrategyquantity',
            name='sii',
        ),
        migrations.RemoveField(
            model_name='solutionquantity',
            name='solution',
        ),
        migrations.RemoveField(
            model_name='solutionquantity',
            name='unit',
        ),
        migrations.RemoveField(
            model_name='solutionratiooneunit',
            name='solution',
        ),
        migrations.RemoveField(
            model_name='solutionratiooneunit',
            name='unit',
        ),
        migrations.RemoveField(
            model_name='solution',
            name='one_unit_equals',
        ),
        migrations.AddField(
            model_name='solution',
            name='documentation',
            field=models.TextField(default=''),
        ),
        migrations.AddField(
            model_name='solution',
            name='possible_implementation_area',
            field=django.contrib.gis.db.models.fields.MultiPolygonField(blank=True, null=True, srid=4326),
        ),
        migrations.AlterField(
            model_name='solution',
            name='description',
            field=models.TextField(default=''),
        ),
        migrations.DeleteModel(
            name='SolutionInStrategyQuantity',
        ),
        migrations.DeleteModel(
            name='SolutionQuantity',
        ),
        migrations.DeleteModel(
            name='SolutionRatioOneUnit',
        ),
        migrations.DeleteModel(
            name='Unit',
        ),
        migrations.AddField(
            model_name='solutionpart',
            name='solution',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='solution_part', to='changes.Solution'),
        ),
        migrations.AddField(
            model_name='implementationquestion',
            name='solution',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='question', to='changes.Solution'),
        ),
        migrations.AddField(
            model_name='implementationquantity',
            name='question',
            field=models.ForeignKey(on_delete=repair.apps.utils.protect_cascade.PROTECT_CASCADE, to='changes.ImplementationQuestion'),
        ),
        migrations.AddField(
            model_name='affectedflow',
            name='solution_part',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='changes.SolutionPart'),
        ),
        migrations.AddField(
            model_name='actorinsolutionpart',
            name='solutionpart',
            field=models.ForeignKey(on_delete=repair.apps.utils.protect_cascade.PROTECT_CASCADE, related_name='targetactor', to='changes.SolutionPart'),
        ),
    ]
